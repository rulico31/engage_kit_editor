/* src/components/Artboard.css */

.artboard {
  /* 見た目 */
  background-color: #ffffff;
  color: #000000;
  border-radius: 4px;

  /* 影 */
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);

  /* サイズ */
  width: 1000px;
  height: 700px;

  margin: 0;
  position: relative;
  transform-origin: 0 0;

  /* 背景画像用のスタイル */
  background-size: cover;
  background-position: 50% 50%; /* デフォルトは中央 */
  background-repeat: no-repeat;
  transition: background-image 0.2s ease;
}

/* アートボード上の全アイテムの基本スタイル */
.artboard-item {
  position: absolute;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  border-radius: 5px;
  padding: 10px 12px;
  font-size: 15px;
  font-weight: 500;
  color: #333;
  cursor: move;
  user-select: none;
  box-sizing: border-box;
  transition: border-color 0.2s ease, box-shadow 0.2s ease,
              transform 0.2s ease, opacity 0.2s ease,
              background-color 0.2s ease, color 0.2s ease;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
}

/* ★ 修正: テキスト入力欄のスタイル */
.artboard-item.is-input {
  background-color: #ffffff; 
  cursor: text;
  /* ★ 追加: 入力欄の場合は外側のパディングをなくす（プレビューと合わせる） */
  padding: 0;
}

/* 選択状態のスタイル (通常) */
.artboard-item.selected {
  border-color: #007acc;
  box-shadow: 0 0 5px rgba(0, 122, 204, 0.5);
  z-index: 1;
}

/* アクティブ状態のスタイル (タブで選択中) */
.artboard-item.active-item {
  border-color: #ffcc00; /* 黄色などで区別 */
  box-shadow: 0 0 8px rgba(255, 204, 0, 0.8);
  z-index: 2;
}

/* グループアイテム */
.artboard-item.is-group {
  border: 1px dashed #999;
  background-color: rgba(0, 0, 0, 0.03);
}
.artboard-item.is-group.selected {
  border-color: #007acc;
  background-color: rgba(0, 122, 204, 0.05);
}

/* --- アイテム種別ごとのスタイル --- */

.item-text-content {
  color: inherit; 
  width: 100%;
  word-break: break-word;
  white-space: pre-wrap;
}

.item-image-content {
  color: #555;
  font-style: italic;
  width: 100%;
  height: 100%;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.item-image-content.is-placeholder {
  padding: 10px 16px;
}
.item-image-content img {
  width: 100%;
  height: 100%;
  object-fit: cover; 
  border-radius: 3px;
}


.item-button-content {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit; 
  cursor: inherit;
  outline: none;
  width: 100%;
  word-break: break-word;
  text-align: center;
  white-space: pre-wrap;
}
.item-button-content:focus {
  outline: none;
}

.item-input-content {
  width: 100%;
  height: 100%;
  padding: 0; 
  display: flex;
  align-items: center;
  justify-content: center;
}

.artboard-item-textarea {
  width: 100%;
  height: 100%;
  min-height: 20px;
  border: none;
  background: none;
  outline: none;
  font: inherit;
  color: inherit; 
  cursor: inherit;
  
  /* ★ 修正: 内側にパディングを持たせる（プレビューと合わせる） */
  padding: 10px 12px;
  
  box-sizing: border-box; 
  resize: none;
  overflow: hidden;
}

.artboard-item:not(.preview) .artboard-item-textarea {
  pointer-events: none; 
}
.artboard-item.preview .artboard-item-textarea {
  cursor: text;
  background-color: #fff; 
  border-radius: 3px;
  padding: 8px 10px;
}
.artboard-item.preview.selected {
  border-color: #ccc;
  box-shadow: none;
}

/* --- プレビュー中のスタイル --- */

.artboard-item.preview {
  cursor: default; 
}
.artboard-item.preview .item-button-content {
  cursor: pointer;
}

/* リサイズハンドル */
.resize-handle {
  position: absolute;
  background: #ffffff;
  border: 1px solid #959595;
  transform: translate(-50%, -50%);
  z-index: 10; /* ハンドルは常に最前面 */
  box-sizing: border-box;
}
.resize-handle.top-left,
.resize-handle.top-right,
.resize-handle.bottom-left,
.resize-handle.bottom-right {
  width: 9px;
  height: 9px;
  border-radius: 0;
}
.resize-handle.top-center,
.resize-handle.bottom-center {
  width: 20px;
  height: 6px;
  border-radius: 3px;
}
.resize-handle.middle-left,
.resize-handle.middle-right {
  width: 6px;
  height: 20px;
  border-radius: 3px;
}
.resize-handle.top-left { top: 0; left: 0; cursor: nwse-resize; }
.resize-handle.top-right { top: 0; right: 0; cursor: nesw-resize; }
.resize-handle.bottom-left { bottom: 0; left: 0; cursor: nesw-resize; }
.resize-handle.bottom-right { bottom: 0; right: 0; cursor: nwse-resize; }
.resize-handle.top-center { top: 0; left: 50%; cursor: ns-resize; }
.resize-handle.bottom-center { bottom: 0; left: 50%; cursor: ns-resize; }
.resize-handle.middle-left { top: 50%; left: 0; cursor: ew-resize; }
.resize-handle.middle-right { top: 50%; right: 0; cursor: ew-resize; }


/* プレビュー中のスタイル */
.artboard.is-preview {
  margin: 20px auto;
  cursor: default;
}

/* ボーダー非表示スタイル */
.artboard-item.no-border {
  border-color: transparent;
}

/* 背景透過スタイル */
.artboard-item.is-transparent {
  background-color: transparent;
}

/* 選択時はボーダーを再表示する (上書き) */
.artboard-item.no-border.selected {
  border-color: #007acc;
}

/* プレビュー中も非表示を維持 */
.artboard-item.no-border.preview {
  border-color: transparent;
}

/* グリッドオーバーレイ */
.artboard-grid-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0; /* アイテムより後ろに表示 */
}